"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Response=_interopRequireDefault(require("./Response")),_Request=_interopRequireDefault(require("./Request"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _instanceof(e,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}function _classCallCheck(e,n){if(!_instanceof(e,n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var FetchWrapper=function(){function e(n){_classCallCheck(this,e),this._baseURL=null,this._headers={},this.configure(n)}return _createClass(e,[{key:"configure",value:function(e){this._baseURL=null==e?void 0:e.baseURL,this._headers=null==e?void 0:e.headers}},{key:"getBaseOptions",value:function(){return{url:new URL(this._baseURL),headers:{headers:this._headers}}}},{key:"sendRequest",value:function(){return new _Request.default(this.getBaseOptions())}},{key:"send",value:function(e){var n=e.clientUrl,t=e.options;return this.middleware(n,t)}},{key:"middleware",value:function(e,n){return new Promise(function(t,r){fetch(e,n).then(function(e){return t(_Response.default.getResponse(e))}).catch(function(e){e.response?r(_Response.default.getResponse(e.response)):r(_Response.default.undefinedError())})})}}]),e}();exports.default=FetchWrapper;
